<?php
$PET_GRAPHICS = array(
  'bunny.gif', 'bunny_chocolate.png', 'bunny_vanilla.png', 'bunny_blue.png',
  'cat-thing.gif', 'cat-thing_pink.png', 'cat_black.png', 'cat_pink.png', 'cat_lemon.png', 'cat_sky.png', 'cat_cranapple.png', 'cat_moss.png',
  'cutemonkey.gif',
  'desikh.gif', 'longhairdesikh.png', 'longhairdesikh2.png',
  'doggish-blue.png', 'doggish.png', 'doggish_papaya.png', 'doggish_coconut.png',
  'duck.gif', 'albinoduck.png', 'duck_tan.png', 'duck_oil.png', 
  'eagle-spider.gif',
  'egg.png', 'egg2.png', 'egg3.png', 'egg4.png', 'egg5.png',
  'fluffy.gif',
  'meaner.gif', 'meaner_yellow.png', 'meaner_blue.png',
  'mousie.gif', 'mousie_sea.png', 'mousie_brown.png', 'mousie_strange.png',
  'neurotic.gif',
  'splat.gif',
  'strange.gif', 'strange_blueberry.png', 'strange_lemon.png', 
  'tentacley.gif',
  'broccoli.gif', 'broccoli_bright.png', 'broccoli_white.png', 'broccoli_trippy.png',
  'roundish.png', 'roundish_cloudy.png', 'roundish_milky.png', 'roundish_sandy.png', 'roundish_sea.png', 'roundish_motley.png', 'roundish_grape.png',
  'much_cuter_mousie.gif', 'much_cuter_mousie_2.png', 'much_cuter_mousie_3.png',
  'numbat.png',
  'frog.gif',
  'squirrely.gif', 'squirrely2.png',
  'the_bones.gif',
  'snakey.gif',
  'bat.gif',
  'thing.gif',
  'evil_thing.gif',
  'sponge.gif', 'sponge_hot.png', 'sponge_neon.png',
  'odd_flying_thing.gif',
  'taunt.gif',
  'chickie.gif',
  'turtle.gif',
  'rooster_not_ostrich.gif',
  'mongoose.gif', 'mongoose_orange.png',
  'mole.gif', 'mole_pale.png',
  'raccoon.gif', 'raccoon_blue.png',
  'dino.gif',
  'odd.png', 'odd_white.png', 'odd_pink.png', 'odd_purple.png',
  'blob.gif',
  'ba_ha.gif', 'why_oh_why.png',
  'happy.gif', 'happy_inverted.png',
  'fountain_tail.gif',
  'spiky.gif',
  'cute.gif', 'cute2.png', 'cute3.png',
  'mushroom.png', 'mushroom_table.png', 'mushroom_poison.png', 'mushroomelle.png',
  'wtf.png',
  'ghostything.gif', 'clyde.png', 'blinky.png', 'pinky.png',
  'eee_piggie.gif', 'eee_piggie_2.png', 
  'sheepie.gif', 'sheepie_green.png', 'sheepie_pink.png', 'sheepie_purple.png', 'sheepie_white.png', 'sheepie_yellow.png',
  'chicken.png', 'chicken_red.png', 'chicken_blue.png',
  'whyabutterfly.gif', 'whyabutterfly_crazy.png', 'whyabutterfly_purple.png', 'whyabutterfly_weird.png', 'whyabutterfly_nani.png', 'whyamoth.png',
  'kiwibird.png', 'kiwibird_red.png',
  'psychohamster.gif',
  'snail.gif',
  'dragon.gif', 'dragon_gold.png', 'dragon_blue.png', 'dragon_orange.png', 'dragon_purple.png',
  'bee.gif', 'bee2.png',
  'peacock.gif',
  'sooty.gif', 'sooty_red.png', 'sooty_yellow.png', 'sooty_blue.png', 'sooty_purple.png',
  'floaty.gif', 'floaty_purple.png', 'floaty_fire.png',
  'lionesque.gif', 'lionesque-w.png',
  'chinchilla.gif', 'chinchilla_light.png', 'chinchilla_superlight.png',
  'giraffe.gif', 'giraffe_yellow.png', 'giraffe_purple.png', 'giraffe_pink.png',
  'haha.gif', 'haha_green.png',
  'thoughts.gif',
  'domo.gif',
  'funnyhead.gif',
  'jellyfish.gif', 'jellyfish_green.png', 'jellyfish_purple.png',
  'rock.gif', 'rock-g.png', 'rock-b.png',
  'flyingawesome.gif',
  'hydra.gif', 'hydra_2.png', 'hydra_iii.png',
  'tinylegs.gif', 'tinylegs_purple.png', 'tinylegs_blue.png',
  'lazyrug.gif',
  'spikey.png',
  'cheetah.png', 'cheetah_pale.png',
  'eyeonlegs.png', 'eyeonlegs2.png',
  'stripedhorse.png',
  'finallyawolf.png', 'finallyawolf2.png',
  'iamgourd.png', 'iamgourd_purple.png', 'iamgourd_blue.png',
  'griffin.gif',
  'robotorflan.gif',
  'twoheadedsnake.gif',
  'strange_squiddy_platypus.png',
  'mtelephant.png',
  'seamonster.png',
  'earrat.png',
  'eyyyyyes.png',
  'cottoncandy.png',
  'treemouse.png',
  'firebird_colored.png',
  'grar.png', 'grar_green.png', 'grar_mud.png',
  'nakedmolerat.png',
  'porkfish.png',
  'polarbear.png',
  'seahorse.png',
  'armadillo.png',
  'swan.png', 'swan_ice.png',
  'chinesedragon.png',
  'meringuebug.png',
  'cuter_griffin.png',
  'chameleon.png',
  'fooshywidgit.png',
  'evolveddesikh.png',
  'aliendude.png',
  'crazybird.png', 'crazybird_2.png',
  'driftyghost.png', 'driftyghost_green.png',
  'firey_fishsnake.png', 'firey_fishsnake2.png', 'firey_fishsnake3.png',
  'sillycow.png', 'sillycow_hownow.png',
  'vanillabo.png', 'limebo.png', 'applebo.png', 'blueberrybo.png', 'mochabo.png', 'rainbo.png',
  'llrabbit.png', 'llrabbit_tail.png',
  'flowerhead.png', 'flowerhead-yellow.png', 'flowerhead-purple.png', 'flowerhead_blue.png',
  'triangle.png',
  'petcube.png',
  'redcrestloon.png',
  'erm.png', 'erm_uh.png', 'erm_wha.png',
  'a_d_pet.png',
  'amouse.png',
  'goat.png',
  'pancake.png',
  'dotdotdot.png',
  'flamingo_firebill.png',
  'bug.png', 'bug_blue.png', 'bug_bw.png', 'bug_purple.png', 'bug_grey.png', 'bug_red.png', 'bug_green.png', 'bug_yellow.png',
  'bird-w-crown.png',
  'pillbug.png', 'pillbug_red.png', 'pillbug_solid.png', 'pillbug_black.png',
  'goldfish.png', 'goldfish_raw.png', 'goldfish_blue.png',
  'frog_green.png', 'frog_brown.png', 'frog_white.png', 'frog_spotted.png', 'frog_textured.png', 'frog_tree.png',
  'wingy.png',
  'onion_happy.png', 'onion_happy2.png',
  'morelikeapuffin.png', 'morelikeapuffin2.png', 'morelikeapuffin3.png', 'morelikeapuffin4.png',
  'fox.png', 'fox_redtip.png', 'fox_bluetail.png', 'fox_spotted.png',
  'parrot.png', 'parrot_one.png', 'parrot_deux.png', 'parrot_red.png', 'parrot_polly.png',
  'flyingfish-green.png', 'flyingfish-silver.png', 'flyingfish-thistle.png',
  'catface.png',
  'bunyip.png', 'bunyip-red.png', 'bunyip-blue.png',
  'tz-tiger-red.png', 'tz-tiger-blue.png', 'tz-tiger-white.png',
  'vertical-orange.png', 'vertical-pastel.png', 'vertical-green.png', 'vertical-metal.png',
);

$PET_TRAITS = array(
  //// LIMBS
  // 2-legs
   1 => array('cutemonkey.gif', 'desikh.gif', 'duck.gif', 'meaner.gif', 'neurotic.gif', 'strange.gif', 'the_bones.gif', 'bat.gif', 'thing.gif', 'evil_thing.gif', 'odd_flying_thing.gif', 'taunt.gif', 'chickie.gif', 'rooster_not_ostrich.gif', 'ba_ha.gif', 'happy.gif', 'spiky.gif', 'chicken.png', 'kiwibird.png', 'dragon.gif', 'peacock.gif', 'domo.gif', 'funnyhead.gif', 'tinylegs.gif', 'spikey.png', 'eyeonlegs.png', 'iamgourd.png', 'firebird_colored.png', 'grar.png', 'swan.png', 'cuter_griffin.png', 'aliendude.png', 'crazybird.png', 'vanillabo.png', 'longhairdesikh.png', 'llrabbit.png', 'flowerhead.png', 'redcrestloon.png', 'why_oh_why.png', 'albinoduck.png', 'amouse.png', 'dotdotdot.png', 'limebo.png', 'applebo.png', 'blueberrybo.png', 'mochabo.png', 'flamingo_firebill.png', 'bird-w-crown.png', 'dragon_gold.png', 'dragon_blue.png', 'duck_tan.png', 'duck_oil.png', 'chicken_blue.png', 'strange_blueberry.png', 'strange_lemon.png', 'pillbug.png', 'pillbug_red.png', 'pillbug_solid.png', 'pillbug_black.png', 'chicken_red.png', 'iamgourd_purple.png', 'iamgourd_blue.png', 'wingy.png', 'morelikeapuffin.png', 'parrot.png', 'parrot_one.png', 'parrot_deux.png', 'parrot_red.png', 'parrot_polly.png', 'rainbo.png', 'catface.png', 'morelikeapuffin2.png', 'morelikeapuffin3.png', 'morelikeapuffin4.png', 'happy_inverted.png', 'tinylegs_purple.png', 'tinylegs_blue.png', 'crazybird_2.png', 'meaner_yellow.png', 'meaner_blue.png', 'longhairdesikh2.png', 'swan_ice.png', 'eyeonlegs2.png', 'flowerhead_blue.png', 'dragon_orange.png', 'dragon_purple.png', 'kiwibird_red.png', 'llrabbit_tail.png', 'bunyip.png', 'bunyip-red.png', 'bunyip-blue.png', 'grar_green.png', 'grar_mud.png', ),
  // 4-legs
   2 => array('bunny.gif', 'cat-thing.gif', 'doggish.png', 'fluffy.gif', 'mousie.gif', 'tentacley.gif', 'roundish.png', 'much_cuter_mousie.gif', 'frog.gif', 'squirrely.gif', 'turtle.gif', 'mongoose.gif', 'mole.gif', 'mole_pale.png', 'raccoon.gif', 'dino.gif', 'fountain_tail.gif', 'cute.gif', 'eee_piggie.gif', 'sheepie.gif', 'psychohamster.gif', 'lionesque.gif', 'chinchilla.gif', 'giraffe.gif', 'thoughts.gif', 'flyingawesome.gif', 'hydra.gif', 'lazyrug.gif', 'cheetah.png', 'stripedhorse.png', 'finallyawolf.png', 'griffin.gif', 'robotorflan.gif', 'strange_squiddy_platypus.png', 'mtelephant.png', 'earrat.png', 'treemouse.png', 'nakedmolerat.png', 'polarbear.png', 'armadillo.png', 'chinesedragon.png', 'chameleon.png', 'fooshywidgit.png', 'sillycow.png', 'goat.png', 'doggish_papaya.png', 'raccoon_blue.png', 'much_cuter_mousie_2.png', 'cat-thing_pink.png', 'eee_piggie_2.png', 'bunny_chocolate.png', 'bunny_vanilla.png', 'chinchilla_light.png', 'chinchilla_superlight.png', 'giraffe_yellow.png', 'giraffe_purple.png', 'giraffe_pink.png', 'sheepie_green.png', 'sheepie_pink.png', 'sheepie_purple.png', 'sheepie_white.png', 'sheepie_yellow.png', 'frog_green.png', 'frog_brown.png', 'frog_white.png', 'frog_spotted.png', 'frog_textured.png', 'frog_tree.png', 'cat_black.png', 'fox.png', 'fox_redtip.png', 'fox_bluetail.png', 'fox_spotted.png', 'hydra_2.png', 'hydra_iii.png', 'cheetah_pale.png', 'squirrely2.png', 'cute2.png', 'cute3.png', 'bunny_blue.png', 'finallyawolf2.png', 'lionesque-w.png', 'mousie_sea.png', 'mousie_brown.png', 'mousie_strange.png', 'sillycow_hownow.png', 'roundish_cloudy.png', 'roundish_milky.png', 'roundish_sandy.png', 'roundish_sea.png', 'roundish_motley.png', 'roundish_grape.png', 'much_cuter_mousie_3.png', 'doggish_coconut.png', 'mongoose_orange.png', 'cat_pink.png', 'cat_lemon.png', 'cat_sky.png', 'cat_cranapple.png', 'cat_moss.png', 'numbat.png', 'tz-tiger-red.png', 'tz-tiger-blue.png', 'tz-tiger-white.png', 'doggish-blue.png', ),
  // 6+-legs
   3 => array('eagle-spider.gif', 'whyabutterfly.gif', 'bee.gif', 'jellyfish.gif', 'meringuebug.png', 'bug.png', 'whyabutterfly_crazy.png', 'whyabutterfly_purple.png', 'whyabutterfly_weird.png', 'whyabutterfly_nani.png', 'jellyfish_green.png', 'jellyfish_purple.png', 'bee2.png', 'bug_blue.png', 'bug_bw.png', 'bug_purple.png', 'bug_grey.png', 'bug_red.png', 'bug_green.png', 'bug_yellow.png', 'whyamoth.png', ),
  // fins
   4 => array('ba_ha.gif', 'wtf.png', 'seamonster.png', 'porkfish.png', 'seahorse.png', 'evolveddesikh.png', 'firey_fishsnake.png', 'why_oh_why.png', 'goldfish.png', 'goldfish_raw.png', 'goldfish_blue.png', 'flyingfish-green.png', 'flyingfish-silver.png', 'flyingfish-thistle.png', 'firey_fishsnake2.png', 'firey_fishsnake3.png', ),
  // wings
   5 => array('duck.gif', 'eagle-spider.gif', 'bat.gif', 'thing.gif', 'odd_flying_thing.gif', 'chickie.gif', 'rooster_not_ostrich.gif', 'chicken.png', 'whyabutterfly.gif', 'kiwibird.png', 'dragon.gif', 'bee.gif', 'peacock.gif', 'thoughts.gif', 'griffin.gif', 'firebird_colored.png', 'swan.png', 'cuter_griffin.png', 'crazybird.png', 'vanillabo.png', 'redcrestloon.png', 'erm.png', 'albinoduck.png', 'limebo.png', 'applebo.png', 'blueberrybo.png', 'mochabo.png', 'flamingo_firebill.png', 'bug.png', 'bird-w-crown.png', 'dragon_gold.png', 'dragon_blue.png', 'duck_tan.png', 'duck_oil.png', 'whyabutterfly_crazy.png', 'whyabutterfly_purple.png', 'whyabutterfly_weird.png', 'whyabutterfly_nani.png', 'chicken_blue.png', 'chicken_red.png', 'wingy.png', 'morelikeapuffin.png', 'parrot.png', 'parrot_one.png', 'parrot_deux.png', 'parrot_red.png', 'parrot_polly.png', 'rainbo.png', 'flyingfish-green.png', 'flyingfish-silver.png', 'flyingfish-thistle.png', 'morelikeapuffin2.png', 'morelikeapuffin3.png', 'morelikeapuffin4.png', 'crazybird_2.png', 'bee2.png', 'swan_ice.png', 'dragon_orange.png', 'dragon_purple.png', 'kiwibird_red.png', 'bug_blue.png', 'bug_bw.png', 'bug_purple.png', 'bug_grey.png', 'bug_red.png', 'bug_green.png', 'bug_yellow.png', 'erm_uh.png', 'whyamoth.png', ),
  // no limbs
   6 => array('egg.png', 'splat.gif', 'broccoli.gif', 'snakey.gif', 'sponge.gif', 'sponge_hot.png', 'sponge_neon.png', 'odd.png', 'blob.gif', 'mushroom.png', 'snail.gif', 'sooty.gif', 'floaty.gif', 'haha.gif', 'rock.gif', 'twoheadedsnake.gif', 'seamonster.png', 'eyyyyyes.png', 'cottoncandy.png', 'porkfish.png', 'seahorse.png', 'firey_fishsnake.png', 'triangle.png', 'petcube.png', 'a_d_pet.png', 'pancake.png', 'sooty_red.png', 'sooty_yellow.png', 'sooty_blue.png', 'sooty_purple.png', 'floaty_purple.png', 'floaty_fire.png', 'goldfish.png', 'goldfish_raw.png', 'goldfish_blue.png', 'broccoli_bright.png', 'broccoli_white.png', 'broccoli_trippy.png', 'onion_happy.png', 'haha_green.png', 'onion_happy2.png', 'rock-g.png', 'rock-b.png', 'firey_fishsnake2.png', 'firey_fishsnake3.png', 'mushroom_poison.png', 'mushroomelle.png', 'mushroom_table.png', 'odd_white.png', 'odd_pink.png', 'odd_purple.png', 'egg2.png', 'egg3.png', 'egg4.png', 'egg5.png', 'vertical-orange.png', 'vertical-pastel.png', 'vertical-green.png', 'vertical-metal.png', ),
  // long legs
   7 => array('eagle-spider.gif', 'rooster_not_ostrich.gif', 'chicken.png', 'kiwibird.png', 'peacock.gif', 'giraffe.gif', 'jellyfish.gif', 'eyeonlegs.png', 'robotorflan.gif', 'mtelephant.png', 'meringuebug.png', 'crazybird.png', 'sillycow.png', 'vanillabo.png', 'llrabbit.png', 'flowerhead.png', 'why_oh_why.png', 'ba_ha.gif', 'limebo.png', 'applebo.png', 'blueberrybo.png', 'mochabo.png', 'flamingo_firebill.png', 'chicken_blue.png', 'chicken_red.png', 'giraffe_yellow.png', 'giraffe_purple.png', 'giraffe_pink.png', 'rainbo.png', 'catface.png', 'jellyfish_green.png', 'jellyfish_purple.png', 'crazybird_2.png', 'eyeonlegs2.png', 'sillycow_hownow.png', 'flowerhead_blue.png', 'kiwibird_red.png', 'llrabbit_tail.png', ),
  // 2-arms
   8 => array('cutemonkey.gif', 'desikh.gif', 'meaner.gif', 'neurotic.gif', 'strange.gif', 'evil_thing.gif', 'taunt.gif', 'ghostything.gif', 'domo.gif', 'funnyhead.gif', 'evolveddesikh.png', 'longhairdesikh.png', 'dotdotdot.png', 'clyde.png', 'blinky.png', 'pinky.png', 'strange_blueberry.png', 'strange_lemon.png', 'pillbug.png', 'pillbug_red.png', 'pillbug_solid.png', 'pillbug_black.png', 'meaner_yellow.png', 'meaner_blue.png', 'longhairdesikh2.png', 'bunyip.png', 'bunyip-red.png', 'bunyip-blue.png', ),

  // hooves
  36 => array('eee_piggie.gif', 'eee_piggie_2.png', 'sheepie.gif', 'sheepie_green.png', 'sheepie_pink.png', 'sheepie_purple.png', 'sheepie_white.png', 'sheepie_yellow.png', 'stripedhorse.png', 'giraffe.gif', 'giraffe_yellow.png', 'giraffe_purple.png', 'giraffe_pink.png', 'sillycow.png', 'sillycow_hownow.png', 'goat.png', ),
   
  //// SIZE
  // huge (giraffe/dragon-size)
  34 => array('dino.gif', 'wtf.png', 'dragon.gif', 'giraffe.gif', 'seamonster.png', 'chinesedragon.png', 'dragon_gold.png', 'dragon_blue.png', 'giraffe_yellow.png', 'giraffe_purple.png', 'giraffe_pink.png', 'dragon_orange.png', 'dragon_purple.png', 'bunyip.png', 'bunyip-red.png', 'bunyip-blue.png', ),
  // tiny (mouse-size)
  35 => array('broccoli.gif', 'much_cuter_mousie.gif', 'frog.gif', 'mushroom.png', 'whyabutterfly.gif', 'snail.gif', 'bee.gif', 'sooty.gif', 'chinchilla.gif', 'rock.gif', 'mtelephant.png', 'earrat.png', 'treemouse.png', 'nakedmolerat.png', 'seahorse.png', 'meringuebug.png', 'amouse.png', 'bug.png', 'sooty_red.png', 'sooty_yellow.png', 'sooty_blue.png', 'sooty_purple.png', 'whyabutterfly_crazy.png', 'whyabutterfly_purple.png', 'whyabutterfly_weird.png', 'whyabutterfly_nani.png', 'much_cuter_mousie_2.png', 'pillbug.png', 'pillbug_red.png', 'pillbug_solid.png', 'pillbug_black.png', 'broccoli_bright.png', 'broccoli_white.png', 'broccoli_trippy.png', 'chinchilla_light.png', 'chinchilla_superlight.png', 'frog_green.png', 'frog_brown.png', 'frog_white.png', 'frog_spotted.png', 'frog_textured.png', 'frog_tree.png', 'rock-g.png', 'rock-b.png', 'bee2.png', 'mushroom_poison.png', 'mushroomelle.png', 'mushroom_table.png', 'much_cuter_mousie_3.png', 'bug_blue.png', 'bug_bw.png', 'bug_purple.png', 'bug_grey.png', 'bug_red.png', 'bug_green.png', 'bug_yellow.png', 'mousie.gif', 'mousie_sea.png', 'mousie_brown.png', 'mousie_strange.png', 'numbat.png', 'whyamoth.png', ),

  //// SKIN
  // scaly
   9 => array('meaner.gif', 'snakey.gif', 'dino.gif', 'ba_ha.gif', 'spiky.gif', 'wtf.png', 'dragon.gif', 'hydra.gif', 'twoheadedsnake.gif', 'eyyyyyes.png', 'porkfish.png', 'armadillo.png', 'chinesedragon.png', 'chameleon.png', 'firey_fishsnake.png', 'why_oh_why.png', 'dragon_gold.png', 'dragon_blue.png', 'goldfish.png', 'goldfish_raw.png', 'goldfish_blue.png', 'flyingfish-green.png', 'flyingfish-silver.png', 'flyingfish-thistle.png', 'hydra_2.png', 'hydra_iii.png', 'meaner_yellow.png', 'meaner_blue.png', 'firey_fishsnake2.png', 'firey_fishsnake3.png', 'dragon_orange.png', 'dragon_purple.png', ),
  // hairy
  10 => array('bunny.gif', 'cat-thing.gif', 'cutemonkey.gif', 'desikh.gif', 'doggish.png', 'fluffy.gif', 'mousie.gif', 'neurotic.gif', 'strange.gif', 'tentacley.gif', 'roundish.png', 'much_cuter_mousie.gif', 'squirrely.gif', 'the_bones.gif', 'thing.gif', 'odd_flying_thing.gif', 'taunt.gif', 'mongoose.gif', 'mole.gif', 'mole_pale.png', 'raccoon.gif', 'odd.png', 'happy.gif', 'fountain_tail.gif', 'cute.gif', 'sheepie.gif', 'psychohamster.gif', 'lionesque.gif', 'chinchilla.gif', 'giraffe.gif', 'domo.gif', 'funnyhead.gif', 'flyingawesome.gif', 'lazyrug.gif', 'cheetah.png', 'stripedhorse.png', 'finallyawolf.png', 'griffin.gif', 'strange_squiddy_platypus.png', 'earrat.png', 'treemouse.png', 'grar.png', 'polarbear.png', 'cuter_griffin.png', 'fooshywidgit.png', 'evolveddesikh.png', 'longhairdesikh.png', 'llrabbit.png', 'a_d_pet.png', 'amouse.png', 'dotdotdot.png', 'doggish_papaya.png', 'raccoon_blue.png', 'strange_blueberry.png', 'strange_lemon.png', 'much_cuter_mousie_2.png', 'cat-thing_pink.png', 'bunny_chocolate.png', 'bunny_vanilla.png', 'chinchilla_light.png', 'chinchilla_superlight.png', 'giraffe_yellow.png', 'giraffe_purple.png', 'giraffe_pink.png', 'sheepie_green.png', 'sheepie_pink.png', 'sheepie_purple.png', 'sheepie_white.png', 'sheepie_yellow.png', 'cat_black.png', 'fox.png', 'fox_redtip.png', 'fox_bluetail.png', 'fox_spotted.png', 'catface.png', 'happy_inverted.png', 'cheetah_pale.png', 'squirrely2.png', 'longhairdesikh2.png', 'cute2.png', 'cute3.png', 'bunny_blue.png', 'finallyawolf2.png', 'lionesque-w.png', 'mousie_sea.png', 'mousie_brown.png', 'mousie_strange.png', 'roundish_cloudy.png', 'roundish_milky.png', 'roundish_sandy.png', 'roundish_sea.png', 'roundish_motley.png', 'roundish_grape.png', 'llrabbit_tail.png', 'odd_white.png', 'odd_pink.png', 'odd_purple.png', 'much_cuter_mousie_3.png', 'bunyip.png', 'bunyip-red.png', 'bunyip-blue.png', 'doggish_coconut.png', 'mongoose_orange.png', 'grar_green.png', 'grar_mud.png', 'cat_pink.png', 'cat_lemon.png', 'cat_sky.png', 'cat_cranapple.png', 'cat_moss.png', 'bat.gif', 'numbat.png', 'tz-tiger-red.png', 'tz-tiger-blue.png', 'tz-tiger-white.png', 'doggish-blue.png', ),
  // spiky hair or body
  12 => array('fluffy.gif', 'odd.png', 'happy.gif', 'spiky.gif', 'wtf.png', 'spikey.png', 'a_d_pet.png', 'happy_inverted.png', 'odd_white.png', 'odd_pink.png', 'odd_purple.png', ),
  // feathered
  13 => array('duck.gif', 'chickie.gif', 'rooster_not_ostrich.gif', 'chicken.png', 'kiwibird.png', 'peacock.gif', 'firebird_colored.png', 'swan.png', 'crazybird.png', 'vanillabo.png', 'redcrestloon.png', 'albinoduck.png', 'limebo.png', 'applebo.png', 'blueberrybo.png', 'mochabo.png', 'flamingo_firebill.png', 'bird-w-crown.png', 'duck_tan.png', 'duck_oil.png', 'chicken_blue.png', 'chicken_red.png', 'morelikeapuffin.png', 'parrot.png', 'parrot_one.png', 'parrot_deux.png', 'parrot_red.png', 'parrot_polly.png', 'rainbo.png', 'morelikeapuffin2.png', 'morelikeapuffin3.png', 'morelikeapuffin4.png', 'crazybird_2.png', 'swan_ice.png', 'kiwibird_red.png', ),
  // oozy
  14 => array('blob.gif', 'snail.gif', 'robotorflan.gif'),
  // shelled
  15 => array('eagle-spider.gif', 'egg.png', 'turtle.gif', 'snail.gif', 'armadillo.png', 'meringuebug.png', 'pillbug.png', 'pillbug_red.png', 'pillbug_solid.png', 'pillbug_black.png', 'egg2.png', 'egg3.png', 'egg4.png', 'egg5.png', ),
  // leathery
  17 => array('frog.gif', 'evil_thing.gif', 'taunt.gif', 'eee_piggie.gif', 'bee.gif', 'thoughts.gif', 'jellyfish.gif', 'eyeonlegs.png', 'iamgourd.png', 'strange_squiddy_platypus.png', 'mtelephant.png', 'seamonster.png', 'nakedmolerat.png', 'seahorse.png', 'aliendude.png', 'sillycow.png', 'erm.png', 'eee_piggie_2.png', 'iamgourd_purple.png', 'iamgourd_blue.png', 'frog_green.png', 'frog_brown.png', 'frog_white.png', 'frog_spotted.png', 'frog_textured.png', 'frog_tree.png', 'wingy.png', 'jellyfish_green.png', 'jellyfish_purple.png', 'bee2.png', 'eyeonlegs2.png', 'sillycow_hownow.png', 'erm_uh.png', 'bat.gif', 'vertical-orange.png', 'vertical-pastel.png', 'vertical-green.png', 'vertical-metal.png',),
  // gasseous
  18 => array('ghostything.gif', 'floaty.gif', 'haha.gif', 'driftyghost.png', 'clyde.png', 'blinky.png', 'pinky.png', 'floaty_purple.png', 'floaty_fire.png', 'driftyghost_green.png', 'haha_green.png', ),
  // rocky
  33 => array('rock.gif', 'triangle.png', 'frog.gif', 'petcube.png', 'rock-g.png', 'rock-b.png', ),

  // patterned
  16 => array('raccoon.gif', 'fountain_tail.gif', 'thoughts.gif', 'cheetah.png', 'stripedhorse.png', 'armadillo.png', 'mochabo.png', 'raccoon_blue.png', 'frog_spotted.png', 'frog_textured.png', 'cheetah_pale.png', 'numbat.png', 'tz-tiger-red.png', 'tz-tiger-blue.png', 'tz-tiger-white.png', 'whyabutterfly.gif', 'peacock.gif', 'thoughts.gif', 'seahorse.png', 'chameleon.png', 'firey_fishsnake.png', 'whyabutterfly_crazy.png', 'whyabutterfly_purple.png', 'whyabutterfly_weird.png', 'whyabutterfly_nani.png', 'whyamoth.png', ),
  // long hair/spikes/whatever
  11 => array('fluffy.gif', 'odd.png', 'happy.gif', 'cute.gif', 'sheepie.gif', 'lionesque.gif', 'chinchilla.gif', 'funnyhead.gif', 'griffin.gif', 'polarbear.png', 'longhairdesikh.png', 'goat.png', 'chinchilla_light.png', 'chinchilla_superlight.png', 'sheepie_green.png', 'sheepie_pink.png', 'sheepie_purple.png', 'sheepie_white.png', 'sheepie_yellow.png', 'happy_inverted.png', 'longhairdesikh2.png', 'cute2.png', 'cute3.png', 'lionesque-w.png', 'odd_white.png', 'odd_pink.png', 'odd_purple.png', ),

  //// TAIL
  // long tail
  19 => array('cat-thing.gif', 'cutemonkey.gif', 'mousie.gif', 'strange.gif', 'much_cuter_mousie.gif', 'squirrely.gif', 'snakey.gif', 'dino.gif', 'fountain_tail.gif', 'spiky.gif', 'wtf.png', 'dragon.gif', 'peacock.gif', 'lionesque.gif', 'chinchilla.gif', 'flyingawesome.gif', 'cheetah.png', 'stripedhorse.png', 'finallyawolf.png', 'twoheadedsnake.gif', 'seamonster.png', 'earrat.png', 'treemouse.png', 'seahorse.png', 'armadillo.png', 'chinesedragon.png', 'cuter_griffin.png', 'chameleon.png', 'fooshywidgit.png', 'evolveddesikh.png', 'crazybird.png', 'driftyghost.png', 'firey_fishsnake.png', 'sillycow.png', 'amouse.png', 'dragon_gold.png', 'dragon_blue.png', 'driftyghost_green.png', 'strange_blueberry.png', 'strange_lemon.png', 'much_cuter_mousie_2.png', 'cat-thing_pink.png', 'goldfish.png', 'goldfish_raw.png', 'goldfish_blue.png', 'chinchilla_light.png', 'chinchilla_superlight.png', 'cat_black.png', 'parrot.png', 'parrot_one.png', 'parrot_deux.png', 'parrot_red.png', 'parrot_polly.png', 'fox.png', 'fox_redtip.png', 'fox_bluetail.png', 'fox_spotted.png', 'flyingfish-green.png', 'flyingfish-silver.png', 'flyingfish-thistle.png', 'cheetah_pale.png', 'crazybird_2.png', 'squirrely2.png', 'finallyawolf2.png', 'lionesque-w.png', 'mousie_sea.png', 'mousie_brown.png', 'mousie_strange.png', 'sillycow_hownow.png', 'firey_fishsnake2.png', 'firey_fishsnake3.png', 'dragon_orange.png', 'dragon_purple.png', 'llrabbit_tail.png', 'much_cuter_mousie_3.png', 'bunyip.png', 'bunyip-red.png', 'bunyip-blue.png', 'cat_pink.png', 'cat_lemon.png', 'cat_sky.png', 'cat_cranapple.png', 'cat_moss.png', 'numbat.png', 'tz-tiger-red.png', 'tz-tiger-blue.png', 'tz-tiger-white.png', ),
  // short tail
  20 => array('bunny.gif', 'doggish.png', 'fluffy.gif', 'roundish.png', 'turtle.gif', 'mongoose.gif', 'raccoon.gif', 'ba_ha.gif', 'cute.gif', 'eee_piggie.gif', 'psychohamster.gif', 'lazyrug.gif', 'griffin.gif', 'strange_squiddy_platypus.png', 'mtelephant.png', 'firebird_colored.png', 'nakedmolerat.png', 'porkfish.png', 'polarbear.png', 'swan.png', 'vanillabo.png', 'redcrestloon.png', 'why_oh_why.png', 'goat.png', 'limebo.png', 'applebo.png', 'blueberrybo.png', 'mochabo.png', 'flamingo_firebill.png', 'doggish_papaya.png', 'raccoon_blue.png', 'eee_piggie_2.png', 'bunny_chocolate.png', 'bunny_vanilla.png', 'morelikeapuffin.png', 'rainbo.png', 'morelikeapuffin2.png', 'morelikeapuffin3.png', 'morelikeapuffin4.png', 'cute2.png', 'cute3.png', 'bunny_blue.png', 'swan_ice.png', 'roundish_cloudy.png', 'roundish_milky.png', 'roundish_sandy.png', 'roundish_sea.png', 'roundish_motley.png', 'roundish_grape.png', 'doggish_coconut.png', 'mongoose_orange.png', 'doggish-blue.png', ),
  // bushy tail
  21 => array('doggish.png', 'squirrely.gif', 'mongoose.gif', 'raccoon.gif', 'cute.gif', 'peacock.gif', 'chinchilla.gif', 'flyingawesome.gif', 'lazyrug.gif', 'cheetah.png', 'stripedhorse.png', 'finallyawolf.png', 'griffin.gif', 'crazybird.png', 'vanillabo.png', 'goat.png', 'limebo.png', 'applebo.png', 'blueberrybo.png', 'mochabo.png', 'doggish_papaya.png', 'raccoon_blue.png', 'chinchilla_light.png', 'chinchilla_superlight.png', 'rainbo.png', 'cheetah_pale.png', 'crazybird_2.png', 'squirrely2.png', 'cute2.png', 'cute3.png', 'finallyawolf2.png', 'doggish_coconut.png', 'mongoose_orange.png', 'numbat.png', 'doggish-blue.png', ),
  // tuft (or some other feature) at end of tail
  22 => array('strange.gif', 'fountain_tail.gif', 'spiky.gif', 'lionesque.gif', 'cuter_griffin.png', 'fooshywidgit.png', 'driftyghost.png', 'sillycow.png', 'driftyghost_green.png', 'strange_blueberry.png', 'strange_lemon.png', 'fox.png', 'fox_redtip.png', 'fox_bluetail.png', 'fox_spotted.png', 'lionesque-w.png', 'sillycow_hownow.png', ),
  
  //// EARS
  // ears
  37 => array('cat-thing.gif', 'cutemonkey.gif', 'meaner.gif', 'mousie.gif', 'giraffe.gif', 'strange.gif', 'much_cuter_mousie.gif', 'squirrely.gif', 'the_bones.gif', 'evil_thing.gif', 'mongoose.gif', 'raccoon.gif', 'fountain_tail.gif', 'eee_piggie.gif', 'sheepie.gif', 'psychohamster.gif', 'dragon.gif', 'lionesque.gif', 'chinchilla.gif', 'flyingawesome.gif', 'lazyrug.gif', 'cheetah.png', 'stripedhorse.png', 'finallyawolf.png', 'griffin.gif', 'porkfish.png', 'sillycow.png', 'amouse.png', 'goat.png', 'dragon_gold.png', 'dragon_blue.png', 'raccoon_blue.png', 'strange_blueberry.png', 'strange_lemon.png', 'much_cuter_mousie_2.png', 'cat-thing_pink.png', 'eee_piggie_2.png', 'chinchilla_light.png', 'chinchilla_superlight.png', 'giraffe_yellow.png', 'giraffe_purple.png', 'giraffe_pink.png', 'sheepie_green.png', 'sheepie_pink.png', 'sheepie_purple.png', 'sheepie_white.png', 'sheepie_yellow.png', 'cat_black.png', 'fox.png', 'fox_redtip.png', 'fox_bluetail.png', 'fox_spotted.png', 'catface.png', 'cheetah_pale.png', 'meaner_yellow.png', 'meaner_blue.png', 'squirrely2.png', 'finallyawolf2.png', 'lionesque-w.png', 'mousie_sea.png', 'mousie_brown.png', 'mousie_strange.png', 'sillycow_hownow.png', 'dragon_orange.png', 'dragon_purple.png', 'much_cuter_mousie_3.png', 'mongoose_orange.png', 'cat_pink.png', 'cat_lemon.png', 'cat_sky.png', 'cat_cranapple.png', 'cat_moss.png', 'bunny.gif', 'doggish.png', 'roundish.png', 'cute.gif', 'mtelephant.png', 'earrat.png', 'treemouse.png', 'fooshywidgit.png', 'llrabbit.png', 'why_oh_why.png', 'doggish_papaya.png', 'bunny_chocolate.png', 'bunny_vanilla.png', 'cute2.png', 'cute3.png', 'bunny_blue.png', 'roundish_cloudy.png', 'roundish_milky.png', 'roundish_sandy.png', 'roundish_sea.png', 'roundish_motley.png', 'roundish_grape.png', 'llrabbit_tail.png', 'bunyip.png', 'bunyip-red.png', 'bunyip-blue.png', 'doggish_coconut.png', 'numbat.png', 'tz-tiger-red.png', 'tz-tiger-blue.png', 'tz-tiger-white.png', 'doggish-blue.png', ),
  // antenna
  25 => array('whyabutterfly.gif', 'bee.gif', 'iamgourd.png', 'bug.png', 'whyabutterfly_crazy.png', 'whyabutterfly_purple.png', 'whyabutterfly_weird.png', 'whyabutterfly_nani.png', 'pillbug.png', 'pillbug_red.png', 'pillbug_solid.png', 'pillbug_black.png', 'iamgourd_purple.png', 'iamgourd_blue.png', 'bee2.png', 'bug_blue.png', 'bug_bw.png', 'bug_purple.png', 'bug_grey.png', 'bug_red.png', 'bug_green.png', 'bug_yellow.png', 'whyamoth.png', ),
  
  // short ears/antenna
  23 => array('cat-thing.gif', 'cutemonkey.gif', 'meaner.gif', 'mousie.gif', 'giraffe.gif', 'strange.gif', 'much_cuter_mousie.gif', 'squirrely.gif', 'the_bones.gif', 'evil_thing.gif', 'mongoose.gif', 'raccoon.gif', 'fountain_tail.gif', 'eee_piggie.gif', 'sheepie.gif', 'dragon.gif', 'lionesque.gif', 'chinchilla.gif', 'flyingawesome.gif', 'lazyrug.gif', 'cheetah.png', 'stripedhorse.png', 'finallyawolf.png', 'griffin.gif', 'porkfish.png', 'sillycow.png', 'amouse.png', 'goat.png', 'dragon_gold.png', 'dragon_blue.png', 'raccoon_blue.png', 'strange_blueberry.png', 'strange_lemon.png', 'much_cuter_mousie_2.png', 'cat-thing_pink.png', 'eee_piggie_2.png', 'chinchilla_light.png', 'chinchilla_superlight.png', 'giraffe_yellow.png', 'giraffe_purple.png', 'giraffe_pink.png', 'sheepie_green.png', 'sheepie_pink.png', 'sheepie_purple.png', 'sheepie_white.png', 'sheepie_yellow.png', 'cat_black.png', 'fox.png', 'fox_redtip.png', 'fox_bluetail.png', 'fox_spotted.png', 'catface.png', 'cheetah_pale.png', 'meaner_yellow.png', 'meaner_blue.png', 'squirrely2.png', 'finallyawolf2.png', 'lionesque-w.png', 'mousie_sea.png', 'mousie_brown.png', 'mousie_strange.png', 'sillycow_hownow.png', 'dragon_orange.png', 'dragon_purple.png', 'much_cuter_mousie_3.png', 'mongoose_orange.png', 'cat_pink.png', 'cat_lemon.png', 'cat_sky.png', 'cat_cranapple.png', 'cat_moss.png', ),
  // long ears/antenna
  24 => array('iamgourd.png', 'bunny.gif', 'doggish.png', 'roundish.png', 'cute.gif', 'mtelephant.png', 'earrat.png', 'treemouse.png', 'fooshywidgit.png', 'llrabbit.png', 'why_oh_why.png', 'doggish_papaya.png', 'bunny_chocolate.png', 'bunny_vanilla.png', 'cute2.png', 'cute3.png', 'bunny_blue.png', 'roundish_cloudy.png', 'roundish_milky.png', 'roundish_sandy.png', 'roundish_sea.png', 'roundish_motley.png', 'roundish_grape.png', 'llrabbit_tail.png', 'bunyip.png', 'bunyip-red.png', 'bunyip-blue.png', 'doggish_coconut.png', 'bug.png', 'bug_blue.png', 'bug_bw.png', 'bug_purple.png', 'bug_grey.png', 'bug_red.png', 'bug_green.png', 'bug_yellow.png', 'pillbug.png', 'pillbug_red.png', 'pillbug_solid.png', 'pillbug_black.png', 'doggish-blue.png', ),

  //// EYES PER HEAD
  // one eye
  38 => array('eyeonlegs.png', 'eyeonlegs2.png', ),

  // 3+ eyes
  39 => array('eyyyyyes.png', ),

  // eye stalks
  28 => array('snail.gif', 'thoughts.gif', 'eyyyyyes.png', 'aliendude.png', ),
  
  //// OTHER FEATURES
  // colorful
  26 => array('splat.gif', 'sponge.gif', 'sponge_hot.png', 'sponge_neon.png', 'rooster_not_ostrich.gif', 'blob.gif', 'spiky.gif', 'cute.gif', 'wtf.png', 'whyabutterfly.gif', 'peacock.gif', 'thoughts.gif', 'seahorse.png', 'chameleon.png', 'firey_fishsnake.png', 'whyabutterfly_crazy.png', 'whyabutterfly_purple.png', 'whyabutterfly_weird.png', 'whyabutterfly_nani.png', 'goldfish.png', 'goldfish_raw.png', 'goldfish_blue.png', 'frog_textured.png', 'frog_tree.png', 'parrot.png', 'parrot_one.png', 'parrot_polly.png', 'rainbo.png', 'hydra.gif', 'hydra_2.png', 'hydra_iii.png', 'crazybird_2.png', 'cute2.png', 'cute3.png', 'mousie_strange.png', 'firey_fishsnake2.png', 'firey_fishsnake3.png', 'roundish_motley.png', 'vertical-pastel.png', ),
  // vegetable
  27 => array('broccoli.gif', 'mushroom.png', 'spikey.png', 'flowerhead.png',  'broccoli_bright.png', 'broccoli_white.png', 'broccoli_trippy.png', 'onion_happy.png', 'onion_happy2.png', 'flowerhead_blue.png', 'mushroom_poison.png', 'mushroomelle.png', 'mushroom_table.png', ),
  // big teeth
  29 => array('the_bones.gif', 'evil_thing.gif', 'dragon.gif', 'lionesque.gif', 'domo.gif', 'hydra.gif', 'tinylegs.gif', 'cheetah.png', 'finallyawolf.png', 'grar.png', 'polarbear.png', 'chinesedragon.png', 'erm.png', 'amouse.png', 'dragon_gold.png', 'dragon_blue.png', 'hydra_2.png', 'hydra_iii.png', 'cheetah_pale.png', 'tinylegs_purple.png', 'tinylegs_blue.png', 'finallyawolf2.png', 'lionesque-w.png', 'dragon_orange.png', 'dragon_purple.png', 'bunyip.png', 'bunyip-red.png', 'bunyip-blue.png', 'grar_green.png', 'grar_mud.png', 'erm_uh.png', ),
  // hovers
  30 => array('egg.png', 'splat.gif', 'sponge.gif', 'sponge_hot.png', 'sponge_neon.png', 'odd.png', 'ghostything.gif', 'floaty.gif', 'haha.gif', 'jellyfish.gif', 'eyyyyyes.png', 'driftyghost.png', 'clyde.png', 'blinky.png', 'pinky.png', 'floaty_purple.png', 'floaty_fire.png', 'driftyghost_green.png', 'haha_green.png', 'jellyfish_green.png', 'jellyfish_purple.png', 'odd_white.png', 'odd_pink.png', 'odd_purple.png', 'egg2.png', 'egg3.png', 'egg4.png', 'egg5.png', ),
  // flies
  31 => array('eagle-spider.gif', 'bat.gif', 'thing.gif', 'odd_flying_thing.gif', 'wtf.png', 'whyabutterfly.gif', 'dragon.gif', 'bee.gif', 'flyingawesome.gif', 'griffin.gif', 'firebird_colored.png', 'chinesedragon.png', 'cuter_griffin.png', 'redcrestloon.png', 'erm.png', 'bug.png', 'dragon_gold.png', 'dragon_blue.png', 'whyabutterfly_crazy.png', 'whyabutterfly_purple.png', 'whyabutterfly_weird.png', 'whyabutterfly_nani.png', 'wingy.png', 'parrot.png', 'parrot_one.png', 'parrot_deux.png', 'parrot_red.png', 'parrot_polly.png', 'flyingfish-green.png', 'flyingfish-silver.png', 'flyingfish-thistle.png', 'bee2.png', 'dragon_orange.png', 'dragon_purple.png', 'bug_blue.png', 'bug_bw.png', 'bug_purple.png', 'bug_grey.png', 'bug_red.png', 'bug_green.png', 'bug_yellow.png', 'erm_uh.png', ),
  // horns
  32 => array('bat.gif', 'evil_thing.gif', 'dragon.gif', 'mtelephant.png', 'goat.png', 'dotdotdot.png', 'dragon_gold.png', 'dragon_blue.png', 'dragon_orange.png', 'dragon_purple.png', ),
);

$TRAIT_WEIGHT = array(
  1 => 20, 2 => 20, 3 => 20, 4 => 20, 5 => 15, 6 => 20, 7 => 10, 8 => 20,
  36 => 20,
  34 => 20, 35 => 20,
  9 => 20, 10 => 20, 12 => 20, 13 => 20, 14 => 20, 15 => 20, 17 => 20, 18 => 20, 33 => 20,
  16 => 5, 11 => 10,
  19 => 10, 20 => 10, 21 => 10, 22 => 10,
  37 => 20, 25 => 20,
  23 => 5, 24 => 5, 
  28 => 25, 38 => 30, 39 => 30,
  26 => 10, 27 => 30, 29 => 10, 30 => 10, 31 => 10, 32 => 10
);

function matching_graphics2($graphic1, $graphic2)
{
  return array_merge(matching_graphics($graphic1), matching_graphics($graphic2));
}

function matching_graphics($graphic)
{
  // special cases...
  if($graphic == 'special/panda.png')
  {
    if(mt_rand(1, 3) == 1)
      return array('special/panda.png');
    else
      $graphic = 'polarbear.png';
  }
  else if($graphic == 'special/bunny_mocha.png')
  {
    if(mt_rand(1, 3) == 1)
      return array('special/bunny_mocha.png');
    else
      $graphic = 'bunny.gif';
  }
  else if($graphic == 'phoenix/firebird_red.png' || $graphic == 'phoenix/firebird_yellow.png' || $graphic == 'phoenix/icebird.png')
    $graphic = 'firebird_colored.png';
  else if($graphic == 'gator.png' || $graphic == 'gator2.png')
    return array('gator.png', 'gator2.png');
  else if($graphic == 'unicorn.png' || $graphic == 'unicorn_candy.png' || $graphic == 'unicorn_citron.png' || $graphic == 'unicorn_sopretty.png')
  {
    if(mt_rand(1, 3) == 1)
      return array('unicorn.png', 'unicorn_candy.png', 'unicorn_citron.png');
    else
      $graphic = 'stripedhorse.png';
  }
  else if($graphic == 'imp.png')
    return array('ghostything.gif', 'clyde.png', 'blinky.png', 'pinky.png');
  else if($graphic == 'chickie_black.png')
    $graphic = 'chickie.gif';
  else if($graphic == 'special/marlin.png')
    $graphic = 'goldfish_blue.png';
  else if($graphic == 'turkey.png')
    $graphic = 'peacock.gif';
  else if($graphic == 'dragon_iridescent.png')
    $graphic = 'dragon.gif';

  global $PET_TRAITS, $TRAIT_WEIGHT, $PET_GRAPHICS;

  if(!in_array($graphic, $PET_GRAPHICS))
  {
    if(mt_rand(1, 5) == 1)
      return array($graphic);
    else
      return $PET_GRAPHICS;
  }

  $pets = array();
  $final_pets = array();
  $max_trait = 0;
  
  foreach($PET_TRAITS as $trait=>$graphics)
  {
    if(in_array($graphic, $graphics))
    {
      foreach($graphics as $pet)
      {
        if($pet != $graphic)
          $pets[$pet] += $TRAIT_WEIGHT[$trait];
      }
    }
    else
    {
      foreach($graphics as $pet)
      {
        if($pet != $graphic)
          $pets[$pet] -= $TRAIT_WEIGHT[$trait];
      }
    }
  }

  foreach($pets as $pet=>$count)
  {
    if($count > $max_trait)
      $max_trait = $count;
  }

  if($max_trait == 0)
    return array($graphic);

  $pets[$graphic] = $max_trait;

  foreach($pets as $pet=>$count)
  {
    if($count / $max_trait >= 0.75)
      $final_pets[] = $pet;
  }

  // increase, drastically, the odds of black cats on Friday 13th
  if(date('D d') == 'Fri 13' && in_array('cat_black.png', $final_pets))
  {
    $final_pets[] = 'cat_black.png';
    $final_pets[] = 'cat_black.png';
    $final_pets[] = 'cat_black.png';
    $final_pets[] = 'cat_black.png';
  }

  if(count($final_pets) == 0)
    return array($graphic);
  
  return $final_pets;
}
?>
